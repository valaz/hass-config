  - platform: influxdb
    host: !secret influxdb_host
    username: !secret influxdb_username
    password: !secret influxdb_password
    queries:
    
    - name: Ultron CPU Temperature
      unit_of_measurement: °C
      value_template: '{{ value | round(1) }}'
      group_function: last
      where: '"sensor" = ''coretemp_packageid0_input'' AND "host" = ''ultron'''
      measurement: '"temp"'
      field: temp
      database: homelab_telegraf
      
    - name: Ultron CPU usage
      unit_of_measurement: '%'
      value_template: '{{ ( value | float * (-1) | float + 100 )| round(2) }}'
      group_function: last
      where: '"cpu" = ''cpu-total'' AND "host" = ''ultron'''
      measurement: '"cpu"'
      field: usage_idle
      database: homelab_telegraf
      
    - name: Ultron RAM usage
      unit_of_measurement: '%'
      value_template: '{{ value | round(2) }}'
      group_function: last
      where: '"host" = ''ultron'''
      measurement: '"mem"'
      field: used_percent
      database: homelab_telegraf
      
    - name: Ultron SWAP usage
      unit_of_measurement: '%'
      value_template: '{{ value | round(2) }}'
      group_function: last
      where: '"host" = ''ultron'''
      measurement: '"swap"'
      field: used_percent
      database: homelab_telegraf
      
    - name: Ultron Parity Disk Temperature
      unit_of_measurement: °C
      value_template: '{{ value | round(2) }}'
      group_function: last
      where: '"serial_no" = ''9MGWL7YJ'' AND "host" = ''ultron'''
      measurement: '"smart_device"'
      field: temp_c
      database: homelab_telegraf
      
    - name: Ultron Disk 1 Temperature
      unit_of_measurement: °C
      value_template: '{{ value | round(2) }}'
      group_function: last
      where: '"serial_no" = ''9KGVHS3L'' AND "host" = ''ultron'''
      measurement: '"smart_device"'
      field: temp_c
      database: homelab_telegraf
      
    - name: Ultron Cache Temperature
      unit_of_measurement: °C
      value_template: '{{ value | round(2) }}'
      group_function: last
      where: '"serial_no" = ''S5Y1NZ0R522193Z'' AND "host" = ''ultron'''
      measurement: '"smart_device"'
      field: temp_c
      database: homelab_telegraf
      
    - name: Ultron 970 Evo Temperature
      unit_of_measurement: °C
      value_template: '{{ value | round(2) }}'
      group_function: last
      where: '"serial_no" = ''S465NX0K957169H'' AND "host" = ''ultron'''
      measurement: '"smart_device"'
      field: temp_c
      database: homelab_telegraf